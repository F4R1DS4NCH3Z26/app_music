<ion-header>
  <ion-toolbar>
    <ion-buttons>
      <ion-button (click)="goToLogin()">
        Back
      </ion-button>
    </ion-buttons>
    <ion-title class="ion-text-center"><h1>MUSIC APP</h1></ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-justify-content-center">
  <ion-card class="ion-margin-horizontal" color="light">
    <ion-card-content>
      <h2 class="title">Sign up</h2>
      <div class="icon-class-register">
        <ion-icon name="aperture-outline"></ion-icon>
      </div>

      <form
        [formGroup]="registerForm"
        (ngSubmit)="registerUser(registerForm.value)"
        class="ion-padding ion-margin"
      >
        <ion-item class="ion-margin-bottom ion-border">
          <ion-input
            label="Email"
            labelPlacement="floating"
            placeholder="example@mail.com"
            formControlName="email"
          ></ion-input>
        </ion-item>

        <div class="validation-error">
          <ng-container *ngFor="let validation of validation_messages.email">
            <h2
              *ngIf="registerForm.get('email')?.hasError(validation.type) && 
              registerForm.get('email')?.dirty"
            >
              <ion-badge color="danger">{{validation.message}}</ion-badge>
            </h2>
          </ng-container>
        </div>

       
        <ion-item class="ion-margin-bottom ion-border">
          <ion-input
            type="password"
            label="Password"
            labelPlacement="floating"
            placeholder="********"
            formControlName="password"
          ></ion-input>
        </ion-item>

        <div class="validation-error">
          <ng-container *ngFor="let validation of validation_messages.password">
            <h2
              *ngIf="registerForm.get('password')?.hasError(validation.type) && 
              registerForm.get('password')?.dirty"
            >
              <ion-badge color="danger">{{validation.message}}</ion-badge>
            </h2>
          </ng-container>
        </div>

        <ion-item class="ion-margin-bottom ion-border">
          <ion-input
            type="text"
            label="Name"
            labelPlacement="floating"
            placeholder="Juanito"
            formControlName="name"
          ></ion-input>
        </ion-item>

        <div class="validation-error">
          <ng-container *ngFor="let validation of validation_messages.name">
            <h2
              *ngIf="registerForm.get('name')?.hasError(validation.type) && 
              registerForm.get('name')?.dirty"
            >
              <ion-badge color="danger">{{validation.message}}</ion-badge>
            </h2>
          </ng-container>
        </div>

        <ion-item class="ion-margin-bottom ion-border">
          <ion-input
            type="text"
            label="lastname"
            labelPlacement="floating"
            placeholder="AlimaÃ±a"
            formControlName="lastname"
          ></ion-input>
        </ion-item>

        <div class="validation-error">
          <ng-container *ngFor="let validation of validation_messages.lastname">
            <h2
              *ngIf="registerForm.get('lastname')?.hasError(validation.type) && 
              registerForm.get('lastname')?.dirty"
            >
              <ion-badge color="danger">{{validation.message}}</ion-badge>
            </h2>
          </ng-container>
        </div>

        

        <ion-button
          class="ion-margin-bottom ion-border"
          type="submit"
          [disabled]="!registerForm.valid"
          >Sign up</ion-button
        >
      </form>
    </ion-card-content>
  </ion-card>

</ion-content>
